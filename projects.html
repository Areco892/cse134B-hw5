<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Projects</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" href="img/favicon.png" type="image/png">
    <style>
        main {
            margin: 5rem 1rem;
            text-align: center;

            h2 {
                font-size: 3rem;
                padding: 1rem;
            }

            a,
            button {
                text-decoration: none;
                border: var(--border);
                border-radius: var(--border-radius);
                background-color: var(--bg-color);
                color: var(--text-color);
                padding: 1rem;
                font-size: var(--p-font-size);
                font-family: var(--text-font);
                margin-bottom: 1rem;
            }

            button:hover {
                cursor: pointer;
            }

            projects-container {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 2rem;

                project-card {
                    display: flex;
                    flex-direction: row;
                    flex-wrap: wrap;
                    gap: 1rem;
                    border: var(--border);
                    border-radius: var(--border-radius);
                    padding: 2rem;
                    width: clamp(40rem, 50vw, 50rem);
                    justify-content: center;

                    h2 {
                        font-size: 2rem;
                        width: 100%;
                    }

                    picture {
                        display: flex;
                        flex-direction: row;
                        justify-content: center;

                        img {
                            width: clamp(20rem, 25vw, 50rem);
                            border: var(--border);
                            border-radius: var(--border-radius);
                        }
                    }

                    p {
                        font-size: 1rem;
                        width: 100%;
                    }

                    a {
                        border: var(--border);
                        border-radius: var(--border-radius);
                        padding: 0.5rem;
                        background-color: var(--bg-color);
                        text-decoration: none;
                        color: var(--text-color);
                        width: clamp(10rem, 100%, 15rem);
                    }
                }
            }
        }
    </style>
    <script>
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === "light" || savedTheme === "dark") {
            document.documentElement.setAttribute('data-theme', savedTheme);
        } else {
            const custom = JSON.parse(savedTheme);
            document.documentElement.style.setProperty('--custom-bg-color', custom.bg);
            document.documentElement.style.setProperty('--custom-text-color', custom.text);
            document.documentElement.style.setProperty('--custom-text-font', custom.font);
            document.documentElement.classList.add("custom-theme");
        }
    </script>
</head>


<body>

    <header>
        <h1>Alexander Huang</h1>
        <button id="theme-toggle" aria-label="Toggle dark mode">Theme</button>

        <form id="theme-form" class="hidden">
            <button id="light-dark" type="button">Light/Dark</button>

            <label for="background-color">Background Color: </label>
            <input id="background-color" name="background-color" type="color">

            <label for="text-color">Text Color: </label>
            <input id="text-color" name="text-color" type="color">

            <label for="text-font">Text Font: </label>
            <select id="text-font" name="text-font">
                <option value="Arial">Arial</option>
                <option value="Georgia">Georgia</option>
                <option value="Courier">Courier</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Comic Sans MS">Comic Sans MS</option>
            </select>

            <button id="theme-pick" type="button">Apply</button>
        </form>

        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="projects.html">Projects</a></li>
                <li><a href="resume.html">Resume</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>
    <hr>

    <main>
        <h2>Projects</h2>
        <a href="project_panel.html">Project Panel</a>
        <button id="loadLocalBtn">Load Local</button>
        <button id="loadRemoteBtn">Load Remote</button>
        <projects-container id="projectsContainer"></projects-container>

    </main>

    <script src="script.js"></script>
    <script>
        /**
         * Set project details to localStorage only if the data doesn't already exists
         */
        const projects_data = [
            { title: 'Classifier', src: '../img/project3-400.png', alt: 'A display of one of the datapoints, the digit 9, from the MNIST dataset.', description: "A simple kNN classifier that is able to classify MNIST digits with a 95% accuracy rate.", link: '/projects/classifier.html' },
            { title: 'Personal Portfolio', src: '../img/project1-400.png', alt: "The front page of Alexander's personal portfolio website.", description: 'This website showcases my work using semantic HTML and accessible design.', link: '/projects/portfolio.html' },
            { title: 'Math Game', src: '../img/project2-400.png', alt: 'The game screen of a math game website that quizzes students on highschool math topics, like linear equations.', description: "An educational website game that quizzes students on highschool math topics, like linear equations.", link: '/projects/game.html' }
        ]
        if (localStorage.getItem('projects') == "[]") {
            localStorage.setItem('projects', JSON.stringify(projects_data));
        }

        /**
         * Get the loadLocal and loadRemote buttons and attack event listeners for click
         */
        document.getElementById('loadLocalBtn').addEventListener('click', loadLocalData);
        document.getElementById('loadRemoteBtn').addEventListener('click', loadRemoteData);

        /**
         * Retrieve the data from local storage and display it on the screen 
         */
        function loadLocalData() {
            const localData = JSON.parse(localStorage.getItem('projects'));
            if (localData) {
                displayData(localData);
            } else {
                console.log('No data in localStorage.');
            }
        }

        /**
         * Retrieve the data from cloud storage and display it on the screen 
         */
        function loadRemoteData() {
            fetch('https://my-json-server.typicode.com/Areco892/cse134B-hw5/db')
                .then(response => response.json())
                .then(result => {
                    const remoteData = result.projects;
                    displayData(remoteData);
                })
                .catch(error => {
                    console.error('Error fetching remote data: ', error)
                });
        }

        /**
         * Helper function to display the data once obtained from either local or remote 
         */
        function displayData(data) {
            const projectsContainer = document.getElementById('projectsContainer');
            projectsContainer.innerHTML = '';

            data.forEach(project => {
                const projectCard = document.createElement('project-card');
                projectCard.setAttribute('src', project.src);
                projectCard.setAttribute('title', project.title);
                projectCard.setAttribute('alt', project.alt);
                projectCard.setAttribute('description', project.description);
                projectCard.setAttribute('link', project.link);
                projectsContainer.appendChild(projectCard);
            });
        }
    </script>
    <noscript>To toggle the themes, JavaScript must be activated.</noscript>
</body>


</html>